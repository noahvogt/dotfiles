#!/bin/sh

# script to display the battery state in dwmblocks

#acpi -b | grep -q "Battery 0" || { printf ""; exit; }
#
#BATTERYSTATE=$( acpi -b | awk '{ split($5,a,":"); print substr($3,0,2), $4, "["a[1]":"a[2]"]" }' | tr -d ',DiFu' )
#if [[ $BATTERYSTATE =~ "Ch" ]]; then
    #icon="âš¡"
#else
    #icon="ðŸ”‹"
#fi
#batterypercent=$(echo "$BATTERYSTATE" | tr -d 'Ch' | sed 's/cargng:/?/')

if grep -q 'Discharging' /sys/class/power_supply/BAT0/status; then
    icon="ðŸ”‹"
elif grep -q 'Charging' /sys/class/power_supply/BAT0/status; then
    icon="âš¡"
elif grep -q 'Full' /sys/class/power_supply/BAT0/status; then
    icon="ðŸ”Œ"
else
    echo "ðŸ–¥ AC"
    exit
fi

printf "%s %s%%\\n" "$icon" "$(cat /sys/class/power_supply/BAT0/capacity)"
